<!-- --------------------------------------------------------------------------------
    Name: trivia.html
    Purpose: Design trivia page while adding functionality so users can answer questions about Philly
    Author: Chris Alex
    DrexelId: cpa49  
------------------------------------------------------------------------------------->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/trivia.css">
    <title>Philadelphia Trivia</title>
</head>
<body>
    <nav> 
        <ul>
            <li><img src="images/Logo.png" class="logo" alt="Logo"></li>
            <li><a href="index.html">Home</a></li>
            <li><a href="database.html">Places</a></li>
            <li><a href="random.html">Random Trip</a></li>
            <li><a href="weather.html">Weather</a></li>
            <li><a href="maps.html">Maps</a></li>
        </ul>
    </nav>

    <h1>Philadelphia Trivia</h1>

    <div class="quiz-container">
        <div id="modeIndicator"></div> <!-- Displays the selected mode -->
        <div class="question" id="question"></div>
        <div id="image-container"></div>
        <div id="timer"></div>
        <div class="options" id="options"></div>
        <div class="quiz-actions">
            <button onclick="nextQuestion()">Next Question</button>
            <button onclick="setMode('easy')" id="easyMode">Easy Mode</button>
            <button onclick="setMode('difficult')" id="difficultMode">Difficult Mode</button>
            <button onclick="resetQuiz()">Reset Quiz</button>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "Where do I go to watch 76ers games?",
                image: "images/Wells.jpg",
                options: ["Wells Fargo Center", "TD Garden", "Lincoln Field Center", "MetLife Stadium"],
                answer: "a"
            },
            {
                question: "What is this bell called?",
                image: "images/Liberty_Bell.jpg",
                options: ["Bell of Good luck", "Bow Bell", "Liberty Bell", "Benjamin Franklin Bell"],
                answer: "c"
            },
            {
                question: "What food do Philadelphians heavily consume?",
                image: "images/food.jpg",
                options: ["Cheesecake", "Pretzel", "Coffee", "Chicken Over Rice"],
                answer: "b"
            },
            {
                question: "What does WAWA mean?",
                image: "images/Wawa.jpg",
                options: ["Snow Goose", "Cow", "Weirdo Alert Weirdo Alert", "Hoagie"],
                answer: "a"
            },
            {
                question: "What musical instrument was first built at Philadelphia in 1775?",
                image: "images/Instrument.jpg",
                options: ["Guitar", "Trumpet", "Drum", "Piano"],
                answer: "d"
            },
            {
                question: "Which place is famous for its farmers crops and international food?",
                image: "images/Reading_Terminal_Market.jpg",
                options: ["Pennsylvania Convention Center", "Rittenhouse Square", "The Shops at Liberty Place", "Reading Terminal Market"],
                answer: "d"
            },
            {
                question: "An interactive science and technology museum that is good for kids",
                image: "images/Franklin_Institute.jpg",
                options: ["Pennsylvania Convention Center", "Franklin Institute", "National Constitutional Center", "Penn's Landing"],
                answer: "b"
            },
            {
                question: "What is this method of transportation called?",
                image: "images/Trolley.jpg",
                options: ["Car", "Trolleybus", "Trolley", "Regional Rail"],
                answer: "c"
            },
            {
                question: "What is Philadelphia's government/municipal building called?",
                image: "images/City_Hall.jpg",
                options: ["City Hall", "White House", "Frankford", "Mayor Office"],
                answer: "a"
            },
            {
                question: "Which street is in between 13th and 15th street?",
                image: "images/Broad_Street.jpg",
                options: ["Callowhill Street", "14th Street", "Broad Street", "Race Street"],
                answer: "c"
            },
            {
                question: "Where can I find Parx Casino, Philadelphia's #1 casino in?",
                image: "images/Parx_Casino.jpg",
                options: ["Philadelphia", "Upper Darby", "Chester", "Bensalem"],
                answer: "d"
            }
        ];

        let currentQuestionIndex = 0;
        let correctAnswers = 0;
        let attempts = 0;
        let mode = 'easy'; // Default mode is set to easy
        let timer;
        let timeLeft;

        function displayQuestion() {
            const currentQuestion = questions[currentQuestionIndex];
            const questionElement = document.getElementById('question');
            const imageContainer = document.getElementById('image-container');
            const optionsContainer = document.getElementById('options');
            const timerElement = document.getElementById('timer');

            questionElement.innerText = currentQuestion.question;
            imageContainer.innerHTML = `<img src="${currentQuestion.image}" alt="Question Image">`;
            optionsContainer.innerHTML = '';

            currentQuestion.options.forEach((option, index) => {
                const optionElement = document.createElement('input');
                optionElement.type = "radio";
                optionElement.name = "answer";
                optionElement.value = index;
                optionElement.addEventListener('change', () => checkAnswer(parseInt(optionElement.value)));
                const label = document.createElement('label');
                label.innerText = option;
                optionsContainer.appendChild(optionElement);
                optionsContainer.appendChild(label);
                optionsContainer.appendChild(document.createElement('br'));
            });

            // Timer for difficult mode
            if (mode === 'difficult') {
                timeLeft = 10; //  in seconds
                timerElement.innerText = `Time left: ${timeLeft} seconds`;
                clearInterval(timer); // Clear timer
                timer = setInterval(() => {
                    timeLeft--;
                    timerElement.innerText = `Time left: ${timeLeft} seconds`;
                    if (timeLeft <= 0) {
                        clearInterval(timer); 
                        alert("Time's up!");
                        nextQuestion(); 
                    }
                }, 1000); // Updates the timer every second
            } else {
                
                clearInterval(timer);
                timerElement.innerText = ''; 
            }

            // Update mode indicator for the html display
            document.getElementById('modeIndicator').innerText = `Mode: ${mode === 'easy' ? 'Easy' : 'Difficult'}`;
        }

        function checkAnswer(index) {
            const currentQuestion = questions[currentQuestionIndex];
            const selectedOption = currentQuestion.options[index];
            const correctOptionIndex = currentQuestion.answer.charCodeAt(0) - 97; // Converts 'a', 'b', 'c', 'd' to 0, 1, 2, 3. From ChatGPT
            const correctOption = currentQuestion.options[correctOptionIndex];

            if (selectedOption === correctOption) {
                if (mode === 'easy' && attempts === 1) {
                    correctAnswers += 0.5; // 1/2 credit given for right answer in second attempt
                } else {
                    correctAnswers++; 
                }
                alert('Correct!');
            } else {
                if (mode === 'easy' && attempts === 0) { // For easy mode, allow two attempts
                    attempts++;
                    alert('Incorrect! You have one more attempt.');
                    return;
                }
                alert(`Incorrect! The correct answer is: ${correctOption}`);
            }

            attempts = 0; 
            clearInterval(timer); 
            nextQuestion();
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                displayQuestion();
            } else {
                displayScore();
            }
        }

        function displayScore() {
            alert(`Your score: ${correctAnswers}/${questions.length}`);
        }

        function resetQuiz() {
            currentQuestionIndex = 0;
            correctAnswers = 0;
            attempts = 0;
            clearInterval(timer); 
            displayQuestion();
        }

        function setMode(selectedMode) {
            mode = selectedMode;
            // Reset the mode buttons style
            document.getElementById('easyMode').classList.remove('selected-mode');
            document.getElementById('difficultMode').classList.remove('selected-mode');
            // Add selected style to the clicked mode button
            document.getElementById(selectedMode + 'Mode').classList.add('selected-mode');
            resetQuiz(); // Reset the quiz when mode changes
        }

        // Display the first question when the page loads/reloads
        displayQuestion();
    </script>
</body>
</html>